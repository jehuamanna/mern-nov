<!DOCTYPE html>

<html>

<head>
    <title>Gender Select</title>
</head>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<body>
    <form>
        <label for="name"> Name</label>
        <input type="text" id="name" name="name" /><br />

        <label for="email"> Email </label>
        <input type="text" id="email" name="email" /><br />


        <label> Gender </label>
        <input type="radio" name="gender" id="male" value="male" /><label for="male">Male</label>
        <input type="radio" name="gender" id="female" value="female" /><label for="female">Female</label></br>

        <input type="submit" value="submit" /> or <input type="reset" value="reset" />
    </form>

    <script>
        const nameHandle = document.getElementById('name')
        nameHandle.addEventListener('blur', function () {
            //console.log("Blur event happened")
            let url = `https://gender-api.com/get?name=${nameHandle.value}&key=pRPLCejozFwCHFbVCR`
            axios.get(url).then(function (response) {
                let data = response.data
                //console.log(`The gender for the ${nameHandle.value} is ${data.gender}`)
                if(data.gender == 'male'){
                    document.getElementById('male').checked = true
                }
                else if(data.gender == 'female'){
                    document.getElementById('female').checked = true
                }
            }).catch(function (err) {
                console.log(err.message)
            })
        })
    </script>
</body>

</html>