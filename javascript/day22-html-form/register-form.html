<!DOCTYPE html>
<html>

<head>
    <title>Registration Form</title>
</head>

<body>
    <form onsubmit="validate()">
        <label for="name"> Name</label>
        <input type="text" id="name" name="name" /><span id="span_name"></span><br />

        <label for="email"> Email </label>
        <input type="text" id="email" name="email" /><span id="span_email"></span><br />

        <label for="password"> Password</label>
        <input type="password" id="password" name="password" /><span id="span_password"></span> <br />

        <input type="submit" id="submit" value="submit" /> or <input type="reset" value="reset" />
    </form>

    <script>

        const state = {
            name: false,
            email: false,
            password: false
        }

        document.getElementById('submit').addEventListener('click', function (e) {
            e.preventDefault()
            validate()
            if (state.email && state.name && state.password) {
                console.log("Validated")
            }
        })

        const nameHandle = document.getElementById('name')
        const emailHandle = document.getElementById('email')
        const passwordHandle = document.getElementById('password')

        function validateEmail() {
            const regex = re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            let errEmail = document.getElementById('span_email')
            errEmail.textContent = ""
            if (regex.test(emailHandle.value)) {
                return true
            }
            else {
                errEmail.textContent = "Wrong email format"
                return false
            }
        }
        
        function validateName() {
            let errName = document.getElementById('span_name')
            errName.textContent = ""
            if (nameHandle.value.length > 0) {
                return true
            }
            else {
                errName.textContent = "This field cannot be empty"
                return false
            }
        }

        function validatePassword() {
            let errPassword = document.getElementById('span_password')
            errPassword.textContent = ""
            if (passwordHandle.value.length >= 8 && passwordHandle.value.length <= 128) {
                return true
            }
            else {
                errPassword.textContent = "Password should be in between 8 to 128 chars"
                return false
            }
        }


        function validate() {
            state.name = validateName()
            state.email = validateEmail()
            state.password = validatePassword()
        }

    </script>
</body>

</html>